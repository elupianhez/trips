<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script> L_NO_TOUCH = false; L_DISABLE_3D = false; </script>

    <style>html, body {width:100%;height:100%;margin:0;padding:0;}</style>
    <style>#map_c19d50558f0a3ccce536257b12a2972c {position:relative;width:100%;height:100%;left:0;top:0;}</style>

    <!-- Leaflet -->
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>

    <!-- jQuery / Bootstrap (seu arquivo j√° trazia) -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css"/>

    <!-- Awesome Markers -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>

    <!-- MarkerCluster -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.1.0/leaflet.markercluster.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.1.0/MarkerCluster.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.1.0/MarkerCluster.Default.css"/>

    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"/>

    <style>
        .fit-bounds-btn{
          position:absolute;top:10%;left:10px;z-index:1000;
          background:#fff;border:1px solid #ccc;padding:6px 10px;border-radius:4px;cursor:pointer
        }
        .legend{
          position:absolute;bottom:12px;left:10px;z-index:1000;
          background:#fff;border:1px solid #ccc;padding:8px 10px;border-radius:4px;font-size:13px;line-height:1.6
        }
        .legend i{margin-right:6px;}
    </style>
</head>
<body>
<div id="map_c19d50558f0a3ccce536257b12a2972c"></div>
<div class="fit-bounds-btn" onclick="map.fitBounds(allMarkers.getBounds())">üìç Mostrar tudo</div>
<div class="legend">
    <div><i class="fa fa-cutlery" style="color:#fff;background:#F39C12;padding:3px 5px;border-radius:3px"></i> Comida & Caf√©</div>
    <div><i class="fa fa-university" style="color:#fff;background:#8E44AD;padding:3px 5px;border-radius:3px"></i> Cultura & Museus</div>
    <div><i class="fa fa-tree" style="color:#fff;background:#27AE60;padding:3px 5px;border-radius:3px"></i> Parques & Pra√ßas</div>
    <div><i class="fa fa-star" style="color:#fff;background:#3498DB;padding:3px 5px;border-radius:3px"></i> Pontos Tur√≠sticos</div>
    <div><i class="fa fa-train" style="color:#fff;background:#C0392B;padding:3px 5px;border-radius:3px"></i> Transporte</div>
</div>
</body>

<script>
    // Mapa
    var map = L.map("map_c19d50558f0a3ccce536257b12a2972c", {
      center: [40.7310, -74.0450],
      crs: L.CRS.EPSG3857,
      zoom: 13,
      zoomControl: true,
      preferCanvas: false,
    });

    // Tiles
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: 'Data by &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',
      maxZoom: 18
    }).addTo(map);

    // Grupos
    var allMarkers = L.featureGroup().addTo(map);
    var cluster = L.markerClusterGroup({});
    map.addLayer(cluster);

    // √çcones por categoria
    var ICONS = {
      food:      L.AwesomeMarkers.icon({ icon:'cutlery',   prefix:'fa', markerColor:'orange'   }),
      culture:   L.AwesomeMarkers.icon({ icon:'university',prefix:'fa', markerColor:'purple'   }),
      park:      L.AwesomeMarkers.icon({ icon:'tree',      prefix:'fa', markerColor:'green'    }),
      sight:     L.AwesomeMarkers.icon({ icon:'star',      prefix:'fa', markerColor:'blue'     }),
      transport: L.AwesomeMarkers.icon({ icon:'train',     prefix:'fa', markerColor:'darkred'  })
    };

    function add(name, lat, lng, category){
      var icon = ICONS[category] || ICONS.sight;
      var marker = L.marker([lat,lng], {icon});
      marker.bindPopup('<div style="min-width:180px"><strong>'+name+'</strong></div>');
      cluster.addLayer(marker);
      allMarkers.addLayer(marker);
    }

    // --- Dados com categorias ---
    // Pontos Tur√≠sticos / Cultura / Parques / Transporte / Comida
    add("Grand Central Terminal", 40.7527, -73.9772, "transport");
    add("Morgan Library & Museum", 40.7492, -73.9817, "culture");
    add("Stavros Niarchos Foundation Library", 40.7513, -73.9811, "culture");
    add("Lincoln Center", 40.7730, -73.9822, "culture");
    add("Metropolitan Museum of Art", 40.7794, -73.9632, "culture");
    add("Washington Square Park", 40.7308, -73.9973, "park");
    add("Bryant Park", 40.7536, -73.9832, "park");
    add("Rockefeller Tree", 40.7587, -73.9787, "sight");
    add("Times Square", 40.7580, -73.9855, "sight");
    add("PATH Newark Station", 40.7345, -74.1638, "transport");

    add("Tavern on the Green", 40.7726, -73.9775, "food");
    add("Magnolia Bakery", 40.7624, -73.9825, "food");
    add("Cafe Luxembourg", 40.7782, -73.9822, "food");
    add("BoCaphe", 40.7224, -73.9980, "food");
    add("Ruby‚Äôs Caf√©", 40.7279, -73.9846, "food");
    add("The Smith Midtown", 40.7546, -73.9716, "food");
    add("Peasant NYC", 40.7218, -73.9922, "food");
    add("Le Pain Quotidien", 40.7519, -73.9773, "food");

    // Ajuste inicial de enquadramento
    if (allMarkers.getLayers().length) {
      map.fitBounds(allMarkers.getBounds(), {padding:[30,30]});
    }
</script>
</html>